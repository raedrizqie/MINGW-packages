diff --git a/src/3rdparty/chromium/third_party/ffmpeg/BUILD.gn b/src/3rdparty/chromium/third_party/ffmpeg/BUILD.gn
index 8dacfa7..2d15f56 100644
--- a/src/3rdparty/chromium/third_party/ffmpeg/BUILD.gn
+++ b/src/3rdparty/chromium/third_party/ffmpeg/BUILD.gn
@@ -82,7 +82,7 @@ config("ffmpeg_dependent_config") {
   ]
 }
 
-if (is_win) {
+if (is_msvc) {
   # Stub generator script and signatures of all functions used by Chrome.
   generate_stubs_script = "//tools/generate_stubs/generate_stubs.py"
 
@@ -118,6 +118,7 @@ config("ffmpeg_warnings") {
 
       # ffmpeg uses its own deprecated functions.
       "-Wno-deprecated-declarations",
+      "-Wno-deprecated-pragma",
 
       # ffmpeg doesn't care about pointer constness.
       "-Wno-incompatible-pointer-types",
@@ -140,6 +141,7 @@ config("ffmpeg_warnings") {
 
       # ffmpeg has a lot of unused variables.
       "-Wno-unused-variable",
+      "-Wno-unused-but-set-variable",
 
       # This fires on `av_assert0(!"valid element size")` in utils.c
       "-Wno-string-conversion",
@@ -372,6 +374,20 @@ target(link_target_type, "ffmpeg_internal") {
 
     defines += [ "_DARWIN_C_SOURCE" ]
   } else if (is_win) {
+    configs -= [ "//build/config/win:lean_and_mean" ]
+  }
+  if (is_mingw) {
+    defines += [
+      "_ISOC99_SOURCE",
+      "_LARGEFILE_SOURCE",
+      "HAVE_AV_CONFIG_H",
+    ]
+    cflags += [
+      "-fno-math-errno",
+      "-fno-signed-zeros",
+      "-fno-tree-vectorize",
+    ]
+  } else if (is_msvc) {
     defines += [
       "_ISOC99_SOURCE",
       "_LARGEFILE_SOURCE",
diff --git a/src/3rdparty/chromium/third_party/ffmpeg/libavutil/internal.h b/src/3rdparty/chromium/third_party/ffmpeg/libavutil/internal.h
index 7c74549..5ab5619 100644
--- a/src/3rdparty/chromium/third_party/ffmpeg/libavutil/internal.h
+++ b/src/3rdparty/chromium/third_party/ffmpeg/libavutil/internal.h
@@ -221,7 +221,7 @@ void avpriv_request_sample(void *avc,
                            const char *msg, ...) av_printf_format(2, 3);
 #endif
 
-#if HAVE_LIBC_MSVCRT
+#if defined(_MSC_VER) && HAVE_LIBC_MSVCRT
 #include <crtversion.h>
 #if defined(_VC_CRT_MAJOR_VERSION) && _VC_CRT_MAJOR_VERSION < 14
 #pragma comment(linker, "/include:" EXTERN_PREFIX "avpriv_strtod")
